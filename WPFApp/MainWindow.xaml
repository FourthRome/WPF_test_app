<Window x:Class="WPFApp.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:WPFApp"
        xmlns:cl="clr-namespace:ClassLibrary;assembly=ClassLibrary"
        mc:Ignorable="d"
        Title="MainWindow" Height="450" Width="800"
        Loaded="WindowLoaded" DataContext="{StaticResource key_team}"
        Closing="OnClosing">
    <Window.Resources>
        <CollectionViewSource Source="{Binding}" x:Key="key_team_view" Filter="FilterResearchers"/>
        <cl:PersonConverter x:Key="key_PersonConverter"/>
        <cl:ResearcherConverter x:Key="key_ResearcherConverter"/>
        <local:PubNumberConverter x:Key="key_PubNumberConverter"/>
        <DataTemplate x:Key="key_PersonListDataTemplate">
            <TextBlock Text="{Binding Converter={StaticResource key_PersonConverter}}"/>
        </DataTemplate>
        <DataTemplate x:Key="key_ResearcherListDataTemplate">
            <TextBlock Text="{Binding Converter={StaticResource key_ResearcherConverter}}"/>
        </DataTemplate>
        <cl:Researcher x:Key="key_researcherStub"/>
        <ContextMenu x:Key="key_ResearcherContextMenu">
            <MenuItem Header="Add Default Researcher" Click="OnClickAddDefaultResearcher" HorizontalAlignment="Left" Height="28" Width="140"/>
            <MenuItem Header="Add Custom Researcher" Click="OnClickAddCustomResearcher" HorizontalAlignment="Left" Height="28" Width="140"/>
        </ContextMenu>
    </Window.Resources>
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition/>
            <ColumnDefinition Width="0*"/>
        </Grid.ColumnDefinitions>
        <Menu HorizontalAlignment="Left" Height="419" VerticalAlignment="Top" Width="792">
            <MenuItem Header="File" Height="44" Width="77">
                <MenuItem Header="New" Click="OnClickNew" HorizontalAlignment="Left" Height="28" Width="140"/>
                <MenuItem Header="Open" Click="OnClickOpen" HorizontalAlignment="Left" Height="28" Width="140"/>
                <MenuItem Header="Save" Click="OnClickSave" HorizontalAlignment="Left" Height="34" Width="140"/>
            </MenuItem>
            <MenuItem Header="Edit" Height="41" Width="93">
                <MenuItem Header="Add Default Researcher" Click="OnClickAddDefaultResearcher" HorizontalAlignment="Left" Height="28" Width="140"/>
                <MenuItem Header="Add Default Programmer" Click="OnClickAddDefaultProgrammer" HorizontalAlignment="Left" Height="28" Width="213" Margin="0,0,-73,0"/>
                <MenuItem Header="Add Custom Researcher" Click="OnClickAddCustomResearcher" HorizontalAlignment="Left" Height="28" Width="140"/>
                <MenuItem Header="Add Defaults" Click="OnClickAddDefaults" HorizontalAlignment="Left" Height="28" Width="140"/>
                <MenuItem Header="Remove" Click="OnClickRemove" HorizontalAlignment="Left" Height="28" Width="140"/>
            </MenuItem>
        </Menu>

        <TextBox HorizontalAlignment="Left" Height="23" Margin="552,68,0,0" TextWrapping="Wrap" Text="{Binding Path=GroupName, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" VerticalAlignment="Top" Width="120" Name="groupNameTextBox"/>
        <TextBlock HorizontalAlignment="Left" Margin="626,91,0,0" TextWrapping="Wrap" Text="{Binding Path=ResearcherFraction}" VerticalAlignment="Top" Name="researcherFractionTextBlock" Height="16" Width="66"/>
        <TextBlock HorizontalAlignment="Left" Margin="626,134,0,0" TextWrapping="Wrap" Text="{Binding Path=ChangesNotSaved}" VerticalAlignment="Top" Name="saveStatusTextBlock" Height="28" Width="120"/>

        <ListBox HorizontalAlignment="Left" Height="128" Margin="10,47,0,0" VerticalAlignment="Top" Width="333" Name="teamObservableListBox"
                 ItemsSource="{Binding}" IsSynchronizedWithCurrentItem="True" ItemTemplate="{StaticResource key_PersonListDataTemplate}"/>
        <ListBox HorizontalAlignment="Left" Height="173" Margin="10,194,0,0" VerticalAlignment="Top" Width="233" Name="researchersListBox"
                 ItemsSource="{Binding Source={StaticResource key_team_view}}" IsSynchronizedWithCurrentItem="True" ItemTemplate="{StaticResource key_ResearcherListDataTemplate}"
                 ContextMenu="{StaticResource key_ResearcherContextMenu}">
            
        </ListBox>

        <RadioButton Content="Use DataTemplate" GroupName="DataTemplate" HorizontalAlignment="Left" Margin="400,89,0,0" VerticalAlignment="Top" Checked="OnCheckedUseDataTemplate" Height="15" Width="115"/>
        <RadioButton Content="Don't use DataTemplate" GroupName="DataTemplate" HorizontalAlignment="Left" Margin="400,132,0,0" VerticalAlignment="Top" IsChecked="True" Checked="OnCheckedDontUseDataTemplate" Height="15" Width="146"/>

        <TextBlock HorizontalAlignment="Left" Height="23" Margin="278,256,0,0" TextWrapping="Wrap" Text="{Binding ElementName=researchersListBox, Path=SelectedItem.Birthdate}" VerticalAlignment="Top" Width="120" Name="birthdateTextBlock"/>
        <TextBlock HorizontalAlignment="Left" Height="23" Margin="278,301,0,0" TextWrapping="Wrap" Text="{Binding ElementName=researchersListBox, Path=SelectedItem.SciField}" VerticalAlignment="Top" Width="120" Name="sciFieldTextBlock"/>
        <TextBlock HorizontalAlignment="Left" Height="23" Margin="278,365,0,0" TextWrapping="Wrap" Text="{Binding ElementName=researchersListBox, Path=SelectedItem.PubNumber}" VerticalAlignment="Top" Width="120" Name="pubNumberTextBlock"/>


        <TextBox HorizontalAlignment="Left" Name="newFirstNameTextBox" Text="{Binding Source={StaticResource key_researcherStub}, Path=FirstName, UpdateSourceTrigger=PropertyChanged}" Height="23" Margin="597,221,0,0" TextWrapping="Wrap" VerticalAlignment="Top" Width="120"/>
        <TextBox HorizontalAlignment="Left" Name="newLastNameTextBox" Text="{Binding Source={StaticResource key_researcherStub}, Path=LastName, UpdateSourceTrigger=PropertyChanged}" Height="23" Margin="597,256,0,0" TextWrapping="Wrap" VerticalAlignment="Top" Width="120"/>
        <DatePicker Name="newBirthdateDatePicker" SelectedDate="{Binding Source={StaticResource key_researcherStub}, Path=Birthdate, UpdateSourceTrigger=PropertyChanged}" Margin="552,301,75,77"></DatePicker>
        <ComboBox Name="newSciFieldComboBox" SelectedItem="{Binding Source={StaticResource key_researcherStub}, Path=SciField, UpdateSourceTrigger=PropertyChanged, Mode=OneWayToSource}"
                  ItemsSource="{Binding Path=ResearchAreas}" SelectedIndex="0" IsReadOnly="True" Margin="552,347,24,41">
        </ComboBox>
        <TextBox HorizontalAlignment="Left" Name="newPubNumberTextBox" Text="{Binding Source={StaticResource key_researcherStub}, Path=PubNumber, UpdateSourceTrigger=PropertyChanged, Converter={StaticResource key_PubNumberConverter}}" Height="23" Margin="597,378,0,0" TextWrapping="Wrap" VerticalAlignment="Top" Width="120"/>

    </Grid>
</Window>
